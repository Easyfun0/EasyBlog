
---
layout: post
title:  "Ruby"
date:   2024-01-16
author: Easyfun
categories: Ruby
tags: [documentation,sample]
image: railway.png
---

### Rubyçš„æ–¹æ³•å’Œé¡åˆ¥

ä½¿ç”¨Rubyä¾†å»ºç«‹é¡åˆ¥(class)-æ–°ç‰©ä»¶çš„æ¨¡æ¿ã€‚

ä½¿ç”¨å¯¦é«”è®Šæ•¸(instanec variable)ä¾†å®šç¾©ç‰©ä»¶ï¼Œä»¥åŠä½¿ç”¨å¯¦é«”æ–¹æ³•(instance method)ä¾†å®šç¾©ç‰©ä»¶èƒ½åšçš„äº‹ã€‚

#### å®šç¾©æ–¹æ³•

åœ¨Rubyä¸­ï¼Œå®šç¾©æ–¹æ³•æ–¹å¼:

{% highlight ruby %}

def print_sum(arg1, arg2)
  print arg1 + arg2
end

{% endhighlight %}

è¦å‘¼å«åŒ…å«å¼•æ•¸çš„æ–¹æ³•ï¼Œå°‡éœ€è¦ç‚ºæ–¹æ³•å®šç¾©åŠ å…¥åƒæ•¸(parameter)ã€‚åƒæ•¸å°‡æœƒå‡ºç¾åœ¨æ–¹æ³•åç¨±ä¹‹å¾Œçš„åœ“æ‹¬è™Ÿè£¡(å¦‚æœæ²’æœ‰åƒæ•¸ï¼Œå‰‡æ‡‰è©²çœç•¥åœ“æ‹¬è™Ÿ)ï¼Œæ–¹æ³•å‘¼å«ä¸Šçš„æ¯å€‹å¼•æ•¸å°‡æœƒè¢«å­˜å…¥æ–¹æ³•å®šç¾©ä¸­ç›¸å°æ‡‰çš„åƒæ•¸ã€‚

{% highlight ruby %}

def hello
  puts "Hello"
end

def bye
  puts "bye"
end

{% endhighlight %}

ä¹Ÿå¯ä»¥æŠŠæ–¹æ³•åƒæ•¸å…ˆå¯«å‡ºä¾†

{% highlight ruby %}

def hello(Mike)
  puts "Hello #{Mike}"
end

{% endhighlight %}

#### å‘¼å«æ‰€å®šç¾©çš„æ–¹æ³•

{% highlight ruby %}

def hello(Mike)
  puts "Hello #{Mike}"
end

hello

{% endhighlight %}

è·ŸJSä¸€æ¨£ç›´æ¥å‘¼å«æ–¹æ³•åç¨±å³å¯ã€‚

#### æ–¹æ³•åç¨±

æ–¹æ³•åç¨±å¯ä»¥æ˜¯ä¸€æˆ–å¤šå€‹å°å¯«å–®å­—ï¼Œå–®å­—é–“ä»¥åº•ç·šç¬¦è™Ÿéš”é–‹ã€‚

åç¨±ä»¥å•è™Ÿ(?)æˆ–é©šå˜†è™Ÿ(!)çµå°¾çš„æ–¹æ³•ä¹Ÿæ˜¯æœ‰æ•ˆçš„ï¼Œç”šè‡³æ˜¯ç­‰è™Ÿ(=)çµå°¾ä¹Ÿæ˜¯å¯è¡Œã€‚

#### åƒæ•¸

å¦‚æœéœ€è¦æŠŠè³‡æ–™å‚³å…¥ä½ çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨æ–¹æ³•åç¨±ä¹‹å¾ŒåŠ ä¸Šä¸€æˆ–å¤šå€‹åƒæ•¸ï¼Œåƒæ•¸ä¹‹é–“ä»¥é€—è™Ÿéš”é–‹ã€‚åœ¨æ–¹æ³•æœ¬é«”ä¸­å¯ä»¥æŠŠåƒæ•¸ç•¶æˆè®Šæ•¸ä¾†å­˜å–ã€‚

{% highlight ruby %}

def print_sum(length, width)
  print length * width
end

{% endhighlight %}

#### å¯é¸åƒæ•¸

åƒæ•¸è®Šæˆå¯é¸ç”¨(make the parameter optional)å¯ä»¥åœ¨æ–¹æ³•å®£å‘Šä¸­æä¾›é è¨­å€¼ã€‚

{% highlight ruby %}

def order_drink(flavor, size = "medium", quantity = 1)
  if quantity == 1
    plural = "cola"
  else
    plural = "colas"
  end
  puts "#{quantity} #{size} #{flavor} #{plural}, here u are"
end

{% endhighlight %}

è¦æ˜¯æƒ³è¦æ”¹è®Šé è¨­å€¼ï¼Œåªè¦åœ¨å¼•æ•¸æŒ‡å®šä½ è¦çš„å€¼å°±è¡Œäº†ï¼Œå¦‚æœå°é è¨­å€¼æ„Ÿåˆ°æ»¿æ„ä¹Ÿå¯è·³éè©²å¼•æ•¸ã€‚

{% highlight ruby %}

order_drink("orange")
order_drink("soda", "small", 2)
order_drink("apple", "large")

{% endhighlight %}

å¯é¸åƒæ•¸å¿…é ˆå‡ºç¾åœ¨ä½ æ‰“ç®—è³¦å€¼çš„ä»»ä½•å…¶ä»–åƒæ•¸ä¹‹å¾Œï¼Œå¦‚æœæŠŠéœ€è¦è³¦å€¼çš„åƒæ•¸æ“ºåˆ°å¯é¸åƒæ•¸å¾Œï¼Œå°‡ç„¡æ³•çœç•¥å¯é¸åƒæ•¸ã€‚

{% highlight ruby %}

def order_drink(flavor, size = "medium", quantity)
  ....
end
order_dring("apple")

{% endhighlight %}

å¯ä»¥åœ¨å¯é¸åƒæ•¸å®£å‘Šæ™‚è³¦å€¼

{% highlight ruby %}

def for_drink( drink = "cola")
  puts "I like #{drink} for lunch"
  puts "It's good!!"
end
#ä¸ç”¨å†ç‚ºdrinkè³¦å€¼ã€‚

for_drink
for_drink("coffee")

{% endhighlight %}

#### å›å‚³å€¼

Rubyçš„å›å‚³å€¼(return value)ï¼Œå°±æ˜¯ã€Œæ–¹æ³•ã€å›å‚³çµ¦ã€Œæ–¹æ³•å‘¼å«è€…ã€çš„å€¼ï¼Œä½¿ç”¨returné—œéµå­—ï¼Œæ–¹æ³•å¯ä»¥æŠŠä¸€å€‹å€¼å›å‚³çµ¦ä»–çš„å‘¼å«è€…ã€‚


{% highlight ruby %}

def mileage(miles_driven, gas_used)
  return miles_driven / gas_used
end

#å¯ä»¥ç”¨åŒä¸€å€‹æ–¹æ³•ä¾†è¨ˆç®—

trip_mileage = mileage(400, 12)

puts "I got #{trip_mile}"

lifetime_mileage = mileage(11432, 366)
puts "This car averages #{lifetime_mileage}"

{% endhighlight %}

#### éš±å¼å›å‚³å€¼

å›å‚³å€¼çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨ä½¿ç”¨returnã€‚åœ¨ä¸€å€‹æ–¹æ³•ä¸­ï¼Œæœ€å¾Œä¸€å€‹é‹ç®—å¼çš„æ±‚å€¼çµæœæœƒè‡ªå‹•æˆç‚ºè©²æ–¹æ³•çš„å›å‚³å€¼ã€‚æ‰€ä»¥mileageå¯ä»¥è¢«æ”¹å¯«æˆä¸ä½¿ç”¨returnã€‚

#### ææ—©å¾æ–¹æ³•è¿”å›

returnæœƒå°è‡´æ–¹æ³•çµæŸåŸ·è¡Œï¼Œå› æ­¤åœ¨å…¶å¾Œçš„ç¨‹å¼ç¢¼å°‡ä¸æœƒè¢«åŸ·è¡Œã€‚

å‡å¦‚æˆ‘é€™é‚Šçµ¦çš„å€¼æ˜¯(0, 0)çš„è©±ï¼Œä»»ä½•å€¼é™¤ä»¥0æœƒç”¢ç”ŸéŒ¯èª¤ã€‚

æ‰€ä»¥å¯ä»¥å…ˆæ¸¬è©¦å€¼æ˜¯å¦ç‚º0ï¼Œä¾†è§£æ±ºæ­¤å•é¡Œ;å¦‚æœå€¼ç‚º0ï¼Œæ–¹æ³•å°±ææ—©è¿”å›ã€‚

{% highlight ruby %}

def mileage(miles_driven, gas_used)
  if gas_used == 0
    return 0.0
  end
  miles_driven / gas_used
end

{% endhighlight %}

#### è¨­è¨ˆä¸€å€‹é¡åˆ¥

ä½¿ç”¨ç‰©ä»¶çš„å¥½è™•æ˜¯ï¼Œç‰©ä»¶æœƒæŠŠä¸€çµ„è³‡æ–™ä»¥åŠé‹ç®—é€™äº›è³‡æ–™çš„æ–¹æ³•æ“ºåœ¨åŒä¸€å€‹åœ°æ–¹ã€‚

å»ºç«‹ç‰©ä»¶å‰ï¼Œéœ€è¦å…ˆå®šç¾©é¡åˆ¥ï¼Œé¡åˆ¥æ˜¯å»ºç«‹ç‰©ä»¶çš„è—åœ–ï¼Œä½¿ç”¨ä¸€å€‹é¡åˆ¥ä¾†å»ºç«‹ç‰©ä»¶ï¼Œé¡åˆ¥æè¿°äº†è©²ç‰©ä»¶æ‰€çŸ¥é“çš„äº‹ï¼Œä»¥åŠæ‰€èƒ½åšçš„å·¥ä½œã€‚

![alt text]({{ site.baseurl }}/assets/img/class.png "Profile Picture"){:.profile}

ğŸ  ä¸€å€‹ç‰©ä»¶æ‰€çŸ¥é“çš„äº‹æƒ…ï¼Œç¨±ç‚º:å¯¦é«”è®Šæ•¸

ğŸ  ä¸€å€‹ç‰©ä»¶æ‰€èƒ½åšçš„æ–¹æ³•ï¼Œç¨±ç‚º:å¯¦é«”æ–¹æ³•

é¡åˆ¥çš„ä¸€å€‹å¯¦é«”(instance)å°±æ˜¯ä½¿ç”¨è©²é¡åˆ¥æ‰€å»ºç«‹çš„ä¸€å€‹ç‰©ä»¶ï¼Œä½ åªéœ€è¦æ”¥å¯«ä¸€å€‹é¡åˆ¥ï¼Œä½†ä½ å¯ä»¥ä½¿ç”¨è©²é¡åˆ¥å»ºç«‹è¨±å¤šå¯¦é«”ã€‚

å¯¦é«”(instance)æ˜¯ç‰©ä»¶(object)çš„å¦ä¸€ç¨®èªªæ³•ã€‚

å¯¦é«”è®Šæ•¸(instance variable)å°±æ˜¯å±¬ä¸€å€‹ç‰©ä»¶çš„è®Šæ•¸ã€‚å¯¦é«”è®Šæ•¸çµ„æˆäº†è©²ç‰©ä»¶æ‰€çŸ¥é“çš„äº‹æƒ…ã€‚ä»£è¡¨äº†ç‰©ä»¶çš„ç‹€æ…‹(è³‡æ–™)ï¼Œå°±é¡åˆ¥çš„æ¯ä¸€å€‹å¯¦é«”è€Œè¨€ï¼Œå¯ä»¥å…·æœ‰ä¸åŒçš„å€¼ã€‚

å¯¦é«”æ–¹æ³•(instance method)å°±æ˜¯ä¸€å€‹ç‰©ä»¶å¯ä¾›ç›´æ¥å‘¼å«çš„æ–¹æ³•ï¼Œå¯¦é«”æ–¹æ³•çµ„æˆäº†è©²ç‰©ä»¶æ‰€èƒ½åšçš„å·¥ä½œã€‚å¯ä»¥å­˜å–ç‰©ä»¶çš„å¯¦é«”è®Šæ•¸ï¼Œä»¥åŠæ ¹æ“šé€™äº›è®Šæ•¸çš„å€¼ä¾†æ”¹è®Šä»–å€‘çš„è¡Œç‚ºã€‚

#### é¡åˆ¥èˆ‡ç‰©ä»¶æœ‰ä½•å€åˆ¥

é¡åˆ¥æ˜¯ç‰©ä»¶çš„è—åœ–ï¼Œæœƒå‘Šè¨´Rubyå¦‚ä½•å»ºç«‹ç‰¹å®šè³‡æ–™å‹æ…‹çš„ç‰©ä»¶ï¼Œç‰©ä»¶å…·æœ‰å¯¦é«”è®Šæ•¸å’Œå¯¦é«”æ–¹æ³•ï¼Œä½†è®Šæ•¸å’Œæ–¹æ³•æ˜¯é¡åˆ¥çš„ä¸€éƒ¨åˆ†ã€‚

**è‹¥é¡åˆ¥æ˜¯é¤…ä¹¾æ¨¡å‹ï¼Œé‚£éº¼ç‰©ä»¶å°±æ˜¯ç”±å®ƒæ‰€åšæˆçš„é¤…ä¹¾ã€‚**

å°±é¡åˆ¥çš„æ–¹æ³•ä¸­æ‰€ç”¨åˆ°çš„å¯¦é«”è®Šæ•¸è€Œè¨€ï¼Œé¡åˆ¥çš„æ¯ä¸€å€‹å¯¦é«”å¯ä»¥å…·æœ‰è‡ªå·±çš„å€¼ã€‚èˆ‰ä¾‹:åªæœƒå®šç¾©Dogé¡åˆ¥ä¸€æ¬¡ï¼Œåœ¨Dogé¡åˆ¥çš„æ–¹æ³•ä¸­ï¼Œå°‡æœƒæŒ‡å®šDogå¯¦é«”ä¸€æ¬¡ï¼Œè€ŒDogå¯¦é«”æ‡‰è©²å…·æœ‰nameå’Œageç­‰å¯¦é«”è®Šæ•¸ã€‚ä½†æ˜¯æ¯å€‹Dogç‰©ä»¶å°‡æœƒæœ‰è‡ªå·±çš„åå­—(name)å’Œå¹´é½¡(age)ï¼Œä¸åŒæ–¼å…¶ä»–çš„Dogå¯¦é«”ã€‚

![alt text]({{ site.baseurl }}/assets/img/class_dog.png "Profile Picture"){:.profile}


é€™æ˜¯ä¸€å€‹Dogé¡åˆ¥:

{% highlight ruby %}

class Dog

  def talk
    puts "woo"
  end 

  def move(destination)
    puts "Running to #{destination}"
  end

end
{% endhighlight %}

å…ˆä½¿ç”¨classé—œéµå­—ä¾†ä¸€å€‹æ–°é¡åˆ¥çš„å®šç¾©ï¼Œå¾Œé¢è·Ÿè‘—æˆ‘å€‘çš„æ–°é¡åˆ¥çš„åç¨±ã€‚

åœ¨é¡åˆ¥çš„å®šç¾©ä¸­ï¼Œå¯ä»¥åŒ…å«æ–¹æ³•çš„å®šç¾©ï¼Œæˆ‘å€‘åœ¨æ­¤è™•æ‰€å®šç¾©çš„ä»»ä½•æ–¹æ³•å°‡æœƒæˆç‚ºé¡åˆ¥ä¹‹å¯¦é«”ä¸Šçš„å¯¦é«”æ–¹æ³•ã€‚

æœ€å¾Œåœ¨ç”¨endé—œéµå­—ä¾†çµæŸé¡åˆ¥çš„å®šç¾©ã€‚

#### å»ºç«‹æ–°çš„å¯¦é«”(ç‰©ä»¶)

å¦‚æœæˆ‘å€‘å‘¼å«ä¸€å€‹é¡åˆ¥çš„newæ–¹æ³•ï¼Œä»–å°‡æœƒå‚³å›æ­¤é¡åˆ¥çš„ä¸€å€‹æ–°å¯¦é«”ï¼Œæ¥è‘—æˆ‘å€‘å¯ä»¥æŠŠè©²å¯¦é«”è³¦å€¼çµ¦ä¸€å€‹è®Šæ•¸ï¼Œæˆ–æ˜¯å°ä»–é€²è¡Œæˆ‘å€‘éœ€è¦åšçš„äº‹ã€‚

    fido = Dog.new
    rex = Dog.new

æˆ‘å€‘æ“æœ‰äº†é¡åˆ¥çš„ä¸€æˆ–å¤šå€‹å¯¦é«”ï¼Œæˆ‘å€‘å°±å¯ä»¥å‘¼å«ä»–å€‘çš„å¯¦é«”æ–¹æ³•ã€‚æˆ‘å€‘æ˜¯ä»¥ç›¸åŒçš„æ–¹å¼ä¾†å‘¼å«ç‰©ä»¶çš„ä»»ä½•æ–¹æ³•:æˆ‘å€‘æœƒç”¨é»è™Ÿç‚ºã€Œæ–¹æ³•çš„æ¥æ”¶è€…ã€åªæ‡‰ä¸€å€‹å¯¦é«”ã€‚

    fido.talk
    rex.move("food good")



#### ä½¿ç”¨ç‰©ä»¶å°å‘çš„åšæ³•

å¯ä»¥æ¡å–ç‰©ä»¶å°å‘çš„åšæ³•è§£æ±ºå•é¡Œï¼Œä¸å†éœ€è¦å»ºç«‹ä¸€å€‹å¤§å‹çš„æ–¹æ³•ä¾†åŒ…å«æ‰€æœ‰é¡å‹;å¯ä»¥é€éé¡åˆ¥ä¾†è¡¨ç¤ºæ¯ä¸€ç¨®é¡å‹çš„æ±è¥¿ï¼Œåœ¨ç‚ºæ¯ä¸€å€‹é¡åˆ¥æ”¾å…¥å°å‹çš„æ–¹æ³•ï¼Œå…¶ä¸­å®šç¾©äº†è©²æ±è¥¿é¡å‹æŒæœ‰çš„è¡Œç‚ºã€‚

{% highlight ruby %}

class Bird

  def talk
    puts "choo"
  end 

  def move(destination)
    puts "Flying to #{destination}"
  end

end

class Cat

  def talk
    puts "mew"
  end 

  def move(destination)
    puts "Running to #{destination}"
  end

end

class Dog

  def talk
    puts "woo"
  end 

  def move(destination)
    puts "Running to #{destination}"
  end

end
{% endhighlight %}

#### ç‚ºæ–°çš„é¡åˆ¥å»ºç«‹å¯¦é«”

å®šç¾©å¥½é¡åˆ¥å¾Œï¼Œå¯ä»¥ç‚ºå®ƒå»ºç«‹æ–°çš„å¯¦é«”(ä»¥é¡åˆ¥ç‚ºåŸºç¤çš„æ–°ç‰©ä»¶)ä»¥åŠå‘¼å«ä»–å€‘çš„æ–¹æ³•ã€‚

åœ¨Rubyä¸­ï¼Œç”¨æ–¼ç‚ºé¡åˆ¥å»ºç«‹å¯¦é«”çš„ç¨‹å¼ç¢¼èˆ‡ç”¨æ–¼å®£å‘Šé¡åˆ¥çš„ç¨‹å¼ç¢¼å¯ä»¥å­˜åœ¨æ–¼åŒä¸€å€‹æª”æ¡ˆä¸­ï¼Œåœ¨è¼ƒå¤§å‹çš„æ‡‰ç”¨ç¨‹å¼ä¸­ï¼Œå¯èƒ½ä¸æœƒæƒ³ä»¥é€™æ–¹å¼ä¾†çµ„ç¹”ï¼Œä½†åœ¨ç°¡å–®çš„é–‹ç™¼å¯ä»¥æŠŠå»ºç«‹å¯¦é«”çš„ç¨‹å¼ç¢¼æ”¾åœ¨é¡åˆ¥å®£å‘Šçš„ä¸‹é¢ã€‚

{% highlight ruby %}

class Bird

  def talk
    puts "choo"
  end 

  def move(destination)
    puts "Flying to #{destination}"
  end

end

class Cat

  def talk
    puts "mew"
  end 

  def move(destination)
    puts "Running to #{destination}"
  end

end

class Dog

  def talk
    puts "woo"
  end 

  def move(destination)
    puts "Running to #{destination}"
  end

end

bird = Bird.new
dog = Dog.new
cat = Cat.new
#ç‚ºæˆ‘å€‘çš„é¡åˆ¥å»ºç«‹æ–°çš„å¯¦é«”


bird.move("Cage")
dog.talk
bird.talk
cat.move("house")
#å‘¼å«å¯¦é«”çš„æ–¹æ³•

{% endhighlight %}

![alt text]({{ site.baseurl }}/assets/img/class_group.png "Profile Picture"){:.profile}

ä»¥ä¸Šåœ–ç‚ºä¾‹ï¼Œé¡åˆ¥çš„å¯¦é«”å…·æœ‰å…©å€‹å¯¦é«”æ–¹æ³•:talkå’Œmoveã€‚

æˆ‘å€‘å¯ä»¥æŠŠnameåƒæ•¸åŠ å…¥talkå’Œmoveæ–¹æ³•ã€‚


    dog = Dog.new
    dog_name = "Mike"
    cat = Cat.new
    cat_name = "Phil"

ä½¿ç”¨å¯¦é«”è®Šæ•¸ä¾†ä¿å­˜ç‰©ä»¶è£¡çš„è³‡æ–™ã€‚é€™æ˜¯ç‰©ä»¶å°å‘è¨­è¨ˆçš„å¥½è™•ï¼ŒæŠŠè³‡æ–™å’Œè™•ç†è³‡æ–™çš„æ–¹æ³•æ”¾åœ¨åŒä¸€å€‹åœ°æ–¹ï¼Œé€™æ¨£å°±ä¸ç”¨å‚³éé‚£éº¼å¤šå¼•æ•¸çµ¦æˆ‘å€‘çš„å¯¦é«”æ–¹æ³•ã€‚


#### å€åŸŸè®Šæ•¸å­˜æ´»åˆ°æ–¹æ³•çµæŸç‚ºæ­¢

å€åŸŸè®Šæ•¸(local variable)ï¼Œæ˜¯æœ‰æ•ˆç¯„åœè¢«ä¾·é™åœ¨ç•¶å‰ä½œç”¨åŸŸçš„è®Šæ•¸ï¼Œåªè¦ç•¶å‰ä½œç”¨åŸŸçµæŸï¼Œå€åŸŸè®Šæ•¸ä¾¿ä¸å¾©å­˜åœ¨ã€‚

{% highlight ruby %}

class Dog

  def make_up_name
    name = "Mike"
  end 

  def talk
    puts "#{name} says Bark"
  end

end

dog = Dog.new
dog.make_up_name
dog.talk

{% endhighlight %}

ä»¥æ­¤ç¯„ä¾‹ï¼Œé€™Dogé¡åˆ¥ä»–å…·æœ‰ä¸€å€‹é¡å¤–çš„æ–¹æ³•ï¼Œmake_up_nameã€‚ç•¶æˆ‘å€‘å‘¼å«ä»–æœƒä¿å­˜åå­—ï¼Œä»¥ç¨å¾Œä¾›talkæ–¹æ³•å–ç”¨ã€‚

ä½†è¦äº‹å…ˆå‘¼å«talkï¼Œé€™é‚Šå°±æœƒå ±éŒ¯ï¼ŒæŒ‡å‡ºnameè®Šæ•¸ä¸¦ä¸å­˜åœ¨ã€‚

é›–ç„¶ä¸Šé¢å·²ç¶“å®šç¾©énameè®Šæ•¸ï¼Œä½†æ˜¯åœ¨ä¸åŒçš„å€åŸŸ(local)è®Šæ•¸ï¼Œå€åŸŸè®Šæ•¸çš„æœ‰æ•ˆç¯„åœä¾·é™åœ¨å»ºç«‹ä»–å€‘çš„æ–¹æ³•ä¸­ï¼Œä¸Šé¢é›–ç„¶æœ‰å®šç¾©éä½†æ˜¯ä»–æ–¹æ³•çµæŸnameä¾¿é›¢é–‹äº†ä½œç”¨åŸŸï¼Œnameè®Šæ•¸ä¾¿ä¸å­˜åœ¨ã€‚

#### åªè¦å¯¦é«”å­˜åœ¨å¯¦é«”è®Šæ•¸å°±å­˜åœ¨

ç‰©ä»¶å¯ä»¥æŠŠè³‡æ–™å­˜å…¥å¯¦é«”è®Šæ•¸(instance varaibale);è¢«ç¹«çµåˆ°ç‰©ä»¶å¯¦é«”çš„è®Šæ•¸ã€‚è¢«å¯«å…¥å¯¦é«”è®Šæ•¸çš„è³‡æ–™ï¼Œèˆ‡ç‰©ä»¶å…±å­˜ï¼Œåªæœ‰ç•¶ç‰©ä»¶è¢«ç§»é™¤ï¼Œè³‡æ–™æ‰æœƒå¾è¨˜æ†¶é«”ä¸­ç§»é™¤ã€‚

å¯¦é«”è®Šæ•¸çœ‹èµ·ä¾†åƒä¸€å€‹æ™®é€šè®Šæ•¸ï¼Œä¸”ä¾å¾ªç›¸åŒçš„å‘½åæ…£ä¾‹ã€‚èªæ³•ä¸Šçš„å·®åˆ¥æ˜¯ï¼Œä»–çš„é–‹é ­å¤šäº†ä¸€å€‹@ç¬¦è™Ÿã€‚

:::info
my_variable å€åŸŸè®Šæ•¸
:::

:::warning
@my_variable å¯¦é«”è®Šæ•¸
:::

ä¸Šé¢ç¯„ä¾‹æ”¹ç”¨å¯¦é«”è®Šæ•¸ï¼Œé€™æ¨£å‘¼å«talkæ–¹æ³•å°±ä¸æœƒéŒ¯èª¤äº†ã€‚

{% highlight ruby %}

class Dog

  def make_up_name
    @name = "Mike"
  end 

  def talk
    puts "#{@name} says Bark"
  end

end

dog = Dog.new
dog.make_up_name
dog.talk

{% endhighlight %}

#### å°è£

ç¾åœ¨æˆ‘å€‘å¯ä»¥ä½¿ç”¨å¯¦é«”è®Šæ•¸ä¾†ä¿å­˜åå­—å’Œå¹´é½¡ï¼Œä½†æ˜¯æ–¹æ³•åªå…è¨±ä½¿ç”¨å›ºå®šçš„å€¼(ç•¶ç¨‹å¼åŸ·è¡Œæ™‚ï¼Œç„¡æ³•æ”¹è®Šä»–å€‘)

Rubyä¸å…è¨±æˆ‘å€‘å¾é¡åˆ¥çš„å¤–é¢ç›´æ¥å­˜å–å¯¦é«”è®Šæ•¸ï¼Œæ˜¯ç‚ºäº†é˜²æ­¢å…¶ä»–ç¨‹å¼å’Œé¡åˆ¥éš¨æ„ä¿®æ”¹ä½ çš„å¯¦é«”è®Šæ•¸ã€‚

#### å±¬æ€§å­˜å–å™¨æ–¹æ³•

å¯ä»¥å»ºç«‹å­˜å–å™¨æ–¹æ³•(accessor method)ï¼Œä»–æœƒç‚ºä½ æŠŠå€¼å¯«å…¥å¯¦é«”è®Šæ•¸ä»¥åŠå¾å¯¦é«”è®Šæ•¸æŠŠå€¼è®€å›ä¾†ã€‚ä¸€ä½†é€éå­˜å–å™¨æ–¹æ³•ä¾†å­˜å–ä½ çš„è³‡æ–™ï¼Œå°±èƒ½æ“´å……é€™äº›æ–¹æ³•ï¼Œè®“ä»–å€‘ä¾†é©—è­‰ä½ çš„è³‡æ–™æ‹’çµ•ä»»ä½•éŒ¯èª¤çš„å€¼ã€‚

Rubyå…·æœ‰å…©ç¨®å­˜å–å™¨æ–¹æ³•: **å±¬æ€§å¯«å…¥å™¨**(attriute writer)ä»¥åŠ**å±¬æ€§é–±è®€å™¨**(attribute reader)ã€‚

{% highlight ruby %}

class MyClass

  def my_attribute = (new_value)
    @my_attribute = new_value
  end

  def my_attribute
    @my_attribute
  end

end

{% endhighlight %}


ã€Œå±¬æ€§ã€æ˜¯é—œæ–¼ç‰©ä»¶çš„ä¸€æ®µè³‡æ–™ï¼Œå±¬æ€§å¯«å…¥å™¨æ–¹æ³•å¯ä»¥è¨­å®šå¯¦é«”è®Šæ•¸ï¼Œè€Œå±¬æ€§é–±è®€å™¨æ–¹æ³•å‰‡å¯ä»¥å–å›å¯¦é«”è®Šæ•¸çš„å€¼ã€‚

å±¬æ€§é–±è®€å™¨æ–¹æ³•ä¾¿æ˜¯ä¸€å€‹ä¾‹å­ï¼Œå¯ç”¨æ–¼å›å‚³@my_attributeçš„ç•¶å‰å€¼ã€‚

å¦‚åŒã€Œé–±è®€å™¨ã€(reader)æ–¹æ³•ï¼Œå±¬æ€§ã€Œå¯«å…¥å™¨ã€(writer)æ–¹æ³•ä¹Ÿæ˜¯ä¸€å€‹æ™®é€šçš„æ–¹æ³•ï¼Œä¹‹æ‰€ä»¥ç¨±ä½œ(attribute)æ–¹æ³•ï¼Œä»–çš„ä¸»è¦ç”¨é€”æ˜¯æ›´æ–°å¯¦é«”è®Šæ•¸çš„å€¼ã€‚

    my_instance.my_attribute = "a value"

ä¹Ÿå¯ä»¥ç”¨=è™Ÿçš„æ–¹æ³•åšç‚ºå±¬æ€§å¯«å…¥å™¨ï¼Œ**my_instance**æ˜¯å‘¼å«æ–¹æ³•ï¼Œ**("a value")**æ˜¯æ–¹æ³•çš„å¼•æ•¸ã€‚

#### ä½¿ç”¨å­˜å–å™¨æ–¹æ³•

ä¾†æ›´æ–°Dogé¡åˆ¥çš„æ–¹æ³•ï¼Œè®“æˆ‘å€‘èƒ½å¤ è®€å–å’Œå¯«å…¥@nameå’Œ@ageç­‰å¯¦é«”è®Šæ•¸ã€‚

{% highlight ruby %}

class Dog

  def name = (new_value)
    @name = new_value
  end 

  def name
    @name
  end

  def age = (new_value)
    @age = new_value
  end

  def age
    @age
  end

  def report_age
    puts "#{name} is #{@age} years old"
  end

  fido = Dog.new
  fido.name = "Mike"
  fido.age = 2
  rex = Dog.new
  rex.name = "Phil"
  rex.age = 3
  fido.report_age
  rex.report_age
  
end

{% endhighlight %}

é€™æ¨£å¯ä»¥å¾Dogé¡åˆ¥ä¹‹å¤–(é–“æ¥)è¨­å®šå’Œä½¿ç”¨@nameå’Œ@ageç­‰å¯¦é«”è®Šæ•¸ã€‚

å› ç‚ºå¸¸éœ€è¦ç‚ºå±¬æ€§å»ºç«‹é€™å…©å€‹å­˜å–å™¨æ–¹æ³•ï¼ŒRubyæä¾›äº†ç°¡å¯«-attr_writerã€attr_readerå’Œattr_accessorã€‚åœ¨é¡åˆ¥å®šç¾©ä¸­å‘¼å«é€™ä¸‰å€‹åšæ³•ï¼Œå°‡æœƒè‡ªå‹•ç‚ºä½ å®šç¾©æ–°çš„å­˜å–å™¨æ–¹æ³•:

![alt text]({{ site.baseurl }}/assets/img/attr.png "Profile Picture"){:.profile}

é€™ä¸‰å€‹æ–¹æ³•éƒ½å¯ä»¥æŒ‡å®šå¤šå€‹å¼•æ•¸ï¼Œæƒ³è¦å®šç¾©çš„å­˜å–å™¨ä¸åªä¸€å€‹ï¼Œå¯ä»¥æŒ‡å®šå¤šå€‹å¼•æ•¸ã€‚

ç”¨é€™æ–¹æ³•ä¾†æ”¹å¯«ä¸Šé¢ç¯„ä¾‹:

{% highlight ruby %}

class Dog

  attr_accessor :name, :age

  def report_age
    puts "#{name} is #{@age} years old"
  end
  
end

{% endhighlight %}


#### ç¬¦è™Ÿ

Rubyç¬¦è™Ÿ(symbol)ç”±ä¸€ä¸²å­—ç¬¦æ‰€æ§‹æˆï¼Œå¦‚åŒä¸€å€‹å­—ä¸²ã€‚:nameå’Œ:ageéƒ½æ˜¯ç¬¦è™Ÿï¼Œèˆ‡å­—ä¸²ä¸åŒçš„æ˜¯ï¼Œç¬¦è™Ÿçš„å€¼ä¸èƒ½æ”¹è®Šï¼Œè®“ç¬¦è™Ÿåœ¨Rubyä¸­é©åˆç”¨æ–¼åƒç”¨(refer to)åç¨±ä¸æœƒæ”¹è®Šä»»ä½•æ±è¥¿ã€‚

#### raiseæ–¹æ³•

ä½¿ç”¨raiseæ–¹æ³•æ™‚ï¼Œifè¿°å¥å°±ä¸ç”¨elseä¾†æ¥ã€‚å¦‚æœæ‰€å‚³å…¥çš„æ˜¯ç„¡æ•ˆå€¼ï¼Œraiseè¿°å¥æœƒè¢«åŸ·è¡Œï¼Œç¨‹å¼æœƒçµ‚æ­¢ã€‚

{% highlight ruby %}

class Dog

  attr_accessor :name, :age

  def name = (value)
    if value == ""
      raise "Name is back"
    end
    @name = value
  end

{% endhighlight %}

